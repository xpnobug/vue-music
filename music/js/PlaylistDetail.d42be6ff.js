(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PlaylistDetail"],{"581c":function(t,e,a){var s=a("839a")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[s]=!1,!"/./"[t](e)}catch(n){}}return!0}},"867a":function(t,e,a){},"982e":function(t,e,a){"use strict";var s=a("e99b"),n=a("db34"),i="includes";s(s.P+s.F*a("581c")(i),"String",{includes:function(t){return!!~n(this,t,i).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},aa18:function(t,e,a){"use strict";var s=a("e99b"),n=a("52a4")(!0);s(s.P,"Array",{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("87b2")("includes")},c17f:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return t.playlist.id?e("div",{staticClass:"playlist-detail"},[e("DetailHeader",{ref:"header",attrs:{playlist:t.playlist,songs:t.songs}}),e("div",{staticClass:"tabs-wrap"},[e("Tabs",{attrs:{tabs:t.tabs,type:"theme"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}}),e("el-input",{directives:[{name:"show",rawName:"v-show",value:t.activeTab===t.SONG_IDX,expression:"activeTab === SONG_IDX"}],staticClass:"input",class:t.getInputCls(),attrs:{placeholder:"搜索歌单音乐","prefix-icon":"el-icon-search"},on:{blur:t.onInputBlur,focus:t.onInputFocus},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1),t.searchValue&&!t.filteredSongs.length?e("div",{staticClass:"empty"},[t._v("\n    未能找到和\n    "),e("span",{staticClass:"keyword"},[t._v("“"+t._s(t.searchValue)+"”")]),t._v("\n    相关的任何音乐\n  ")]):t._e(),e("SongTable",{directives:[{name:"show",rawName:"v-show",value:t.activeTab===t.SONG_IDX,expression:"activeTab === SONG_IDX"}],staticClass:"table",attrs:{highlightText:t.searchValue,songs:t.filteredSongs}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.activeTab===t.COMMENT_IDX,expression:"activeTab === COMMENT_IDX"}],staticClass:"comments"},[e("Comments",{attrs:{id:t.id,type:"playlist"},on:{update:t.onCommentsUpdate}})],1)],1):t._e()},n=[],i=(a("aa18"),a("982e"),a("e680"),a("352e"),a("61a9")),r=(a("a450"),function(){var t=this,e=t._self._c;return t.playlist.id?e("div",{staticClass:"header"},[e("div",{staticClass:"img-wrap"},[e("img",{attrs:{src:t.$utils.genImgUrl(t.playlist.coverImgUrl,400)}})]),e("div",{staticClass:"content"},[e("div",{staticClass:"title-wrap"},[e("p",{staticClass:"title"},[t._v(t._s(t.playlist.name))])]),e("div",{staticClass:"creator-wrap"},[e("img",{staticClass:"avatar",attrs:{src:t.playlist.creator.avatarUrl}}),e("p",{staticClass:"creator"},[t._v(t._s(t.playlist.creator.nickname))]),e("p",{staticClass:"create-time"},[t._v("\n        "+t._s(t.$utils.formatDate(t.playlist.createTime,"yyyy-MM-dd"))+" 创建\n      ")])]),e("div",{staticClass:"action-wrap"},[e("NButton",{staticClass:"button",on:{click:t.playAll}},[e("Icon",{staticClass:"icon middle",attrs:{color:"white",type:"play-round"}}),e("span",{staticClass:"middle"},[t._v("播放全部")])],1)],1),e("div",{staticClass:"desc-wrap"},[t.tagsText?e("p",{staticClass:"desc"},[e("span",[t._v("标签："+t._s(t.tagsText))])]):t._e(),t.playlist.description?e("p",{staticClass:"desc"},[e("span",{staticClass:"value"},[t._v("简介："+t._s(t.playlist.description))])]):t._e()])])]):t._e()}),c=[],o=(a("ac67"),a("1bc7"),a("32ea"),a("a2c7")),l=a("e7e6");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={props:{playlist:{type:Object,default:function(){return{}}},songs:{type:Array,default:function(){return[]}}},methods:p(p({playAll:function(){this.startSong(this.songs[0]),this.setPlaylist(this.songs)}},Object(l["c"])(["setPlaylist"])),Object(l["a"])(["startSong"])),computed:{tagsText:function(){return this.playlist.tags.join("/")}}},f=d,h=(a("e83f"),a("829d")),v=Object(h["a"])(f,r,c,!1,null,"1ef23c8a",null),m=v.exports,b=a("a110"),g=a("961b"),y=a("ed08"),w=a("365c"),O=500,C=0,_=1,j={metaInfo:function(){return{title:this.playlist.name}},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.SONG_IDX=C,this.COMMENT_IDX=_;case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),data:function(){return{tabs:["歌曲列表","评论"],activeTab:C,playlist:{},songs:[],searchValue:"",inputFocus:!1}},methods:{init:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(w["f"])({id:this.id});case 2:e=t.sent,a=e.playlist,this.playlist=a,this.genSonglist(a);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),genSonglist:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.trackIds.map((function(t){var e=t.id;return e})),t.next=3,Object(w["w"])(a.slice(0,O));case 3:s=t.sent,n=s.songs.map((function(t){var e=t.id,a=t.name,s=t.al,n=t.ar,i=t.mv,r=t.dt;return Object(y["createSong"])({id:e,name:a,artists:n,duration:r,mvId:i,albumName:s.name,img:s.picUrl})})),this.songs=n;case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onCommentsUpdate:function(t){var e=t.total;this.tabs.splice(_,1,"评论(".concat(e,")"))},onInputFocus:function(){this.inputFocus=!0},onInputBlur:function(){this.inputFocus=!1},getInputCls:function(){return this.inputFocus?"":"inactive"},scrollToHeader:function(){var t=this.$refs.header;t&&Object(y["scrollInto"])(t.$el)}},computed:{id:function(){return Number(this.$route.params.id)},filteredSongs:function(){var t=this;return this.songs.filter((function(e){var a=e.name,s=e.artistsText,n=e.albumName;return"".concat(a).concat(s).concat(n).toLowerCase().includes(t.searchValue.toLowerCase())}))}},watch:{id:{handler:function(){this.searchValue="",this.init(),this.scrollToHeader()},immediate:!0}},components:{DetailHeader:m,SongTable:b["a"],Comments:g["a"]}},T=j,x=(a("f3a5"),Object(h["a"])(T,s,n,!1,null,"2731553c",null));e["default"]=x.exports},db34:function(t,e,a){var s=a("804d"),n=a("3ab0");t.exports=function(t,e,a){if(s(e))throw TypeError("String#"+a+" doesn't accept regex!");return String(n(t))}},e7b2:function(t,e,a){},e83f:function(t,e,a){"use strict";a("867a")},f3a5:function(t,e,a){"use strict";a("e7b2")}}]);
//# sourceMappingURL=PlaylistDetail.d42be6ff.js.map