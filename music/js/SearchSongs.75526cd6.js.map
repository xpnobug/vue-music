{"version":3,"sources":["webpack:///./src/components/with-pagination.vue","webpack:///src/components/with-pagination.vue","webpack:///./src/components/with-pagination.vue?54e2","webpack:///./src/components/with-pagination.vue?648a","webpack:///./src/page/search/songs.vue","webpack:///src/page/search/songs.vue","webpack:///./src/page/search/songs.vue?4ebd","webpack:///./src/page/search/songs.vue?4f5c","webpack:///./src/page/search/songs.vue?2fad","webpack:///./src/components/with-pagination.vue?d689"],"names":["render","_vm","this","_c","_self","staticClass","_t","attrs","currentPage","limit","total","on","$event","onPageChange","staticRenderFns","props","getData","type","Function","required","getDataParams","Object","default","Number","scrollTarget","HTMLElement","created","data","methods","_onPageChange","_asyncToGenerator","regeneratorRuntime","mark","_callee","result","wrap","_context","prev","next","_objectSpread","offset","getPageOffset","sent","$emit","scrollInto","t0","stop","apply","arguments","watch","deep","handler","component","getSearch","searchParams","searchRoot","$refs","header","songCount","onGetSearch","keywords","renderNameDesc","songs","inject","_result$result","map","song","id","mvid","name","alias","artists","duration","album","createSong","mvId","albumName","albumId","onUpdateCount","scope","_this","h","$createElement","row","desc","computed","components","SongTable","WithPagination"],"mappings":"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","file":"js/SearchSongs.75526cd6.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"with-pagination\"},[_vm._t(\"default\"),_c('div',{staticClass:\"pagination-wrap\"},[_c('Pagination',{staticClass:\"pagination\",attrs:{\"current-page\":_vm.currentPage,\"page-size\":_vm.limit,\"total\":_vm.total},on:{\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event},\"current-change\":_vm.onPageChange}})],1)],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"with-pagination\">\r\n    <slot></slot>\r\n    <div class=\"pagination-wrap\">\r\n      <Pagination\r\n        :current-page.sync=\"currentPage\"\r\n        :page-size=\"limit\"\r\n        :total=\"total\"\r\n        @current-change=\"onPageChange\"\r\n        class=\"pagination\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\nimport { getPageOffset, scrollInto } from \"@/utils\"\r\n\r\nexport default {\r\n  props: {\r\n    getData: {\r\n      type: Function,\r\n      required: true\r\n    },\r\n    getDataParams: {\r\n      type: Object,\r\n      default: () => ({})\r\n    },\r\n    limit: {\r\n      type: Number,\r\n      default: 10\r\n    },\r\n    scrollTarget: {\r\n      type: HTMLElement\r\n    },\r\n    total: {\r\n      type: Number,\r\n      default: 0\r\n    }\r\n  },\r\n  created() {\r\n    this.onPageChange()\r\n  },\r\n  data() {\r\n    return {\r\n      currentPage: 1\r\n    }\r\n  },\r\n  methods: {\r\n    async onPageChange() {\r\n      try {\r\n        const result = await this.getData({\r\n          limit: this.limit,\r\n          offset: getPageOffset(this.currentPage, this.limit),\r\n          ...this.getDataParams\r\n        })\r\n        this.$emit(\"getDataSuccess\", result)\r\n        // 如果传入了滚动的目标对象 分页后自动滚入\r\n        if (this.scrollTarget) {\r\n          scrollInto(this.scrollTarget)\r\n        }\r\n      } catch (error) {\r\n        this.$emit(\"getDataError\", error)\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    getDataParams: {\r\n      deep: true,\r\n      handler() {\r\n        this.currentPage = 1\r\n        this.onPageChange()\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.pagination-wrap {\r\n  margin-top: 16px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!./with-pagination.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!./with-pagination.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./with-pagination.vue?vue&type=template&id=772dc5dc&scoped=true\"\nimport script from \"./with-pagination.vue?vue&type=script&lang=js\"\nexport * from \"./with-pagination.vue?vue&type=script&lang=js\"\nimport style0 from \"./with-pagination.vue?vue&type=style&index=0&id=772dc5dc&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.11.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"772dc5dc\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"search-songs\"},[_c('WithPagination',{attrs:{\"getData\":_vm.getSearch,\"getDataParams\":_vm.searchParams,\"limit\":30,\"scrollTarget\":_vm.searchRoot.$refs && _vm.searchRoot.$refs.header,\"total\":_vm.songCount},on:{\"getDataSuccess\":_vm.onGetSearch}},[_c('div',{staticClass:\"table\"},[_c('SongTable',{attrs:{\"highlightText\":_vm.keywords,\"renderNameDesc\":_vm.renderNameDesc,\"songs\":_vm.songs,\"stripe\":true}})],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 搜索详情页面\r\n<template>\r\n  <div class=\"search-songs\">\r\n    <WithPagination\r\n      :getData=\"getSearch\"\r\n      :getDataParams=\"searchParams\"\r\n      :limit=\"30\"\r\n      :scrollTarget=\"searchRoot.$refs && searchRoot.$refs.header\"\r\n      :total=\"songCount\"\r\n      @getDataSuccess=\"onGetSearch\"\r\n    >\r\n      <div class=\"table\">\r\n        <SongTable\r\n          :highlightText=\"keywords\"\r\n          :renderNameDesc=\"renderNameDesc\"\r\n          :songs=\"songs\"\r\n          :stripe=\"true\"\r\n        />\r\n      </div>\r\n    </WithPagination>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\nimport { getSearch } from \"@/api\"\r\nimport SongTable from \"@/components/song-table\"\r\nimport WithPagination from \"@/components/with-pagination\"\r\nimport { createSong } from \"@/utils\"\r\n\r\nexport default {\r\n  inject: [\"searchRoot\"],\r\n  created() {\r\n    this.getSearch = getSearch\r\n  },\r\n  data() {\r\n    return {\r\n      songs: [],\r\n      songCount: 0,\r\n      currentPage: 1\r\n    }\r\n  },\r\n  methods: {\r\n    onGetSearch(result) {\r\n      const {\r\n        result: { songs, songCount }\r\n      } = result\r\n      this.songs = songs.map(song => {\r\n        const { id, mvid, name, alias, artists, duration, album } = song\r\n        return createSong({\r\n          id,\r\n          name,\r\n          alias,\r\n          artists,\r\n          duration,\r\n          mvId: mvid,\r\n          albumName: album.name,\r\n          albumId: album.id\r\n        })\r\n      })\r\n      this.songCount = songCount\r\n      this.searchRoot.onUpdateCount(songCount)\r\n    },\r\n    renderNameDesc(scope) {\r\n      const { alias } = scope.row\r\n      return alias.map(desc => (\r\n        <HighlightText\r\n          class=\"name-desc\"\r\n          text={desc}\r\n          highlightText={this.keywords}\r\n        />\r\n      ))\r\n    }\r\n  },\r\n  computed: {\r\n    keywords() {\r\n      return this.searchRoot.keywords\r\n    },\r\n    searchParams() {\r\n      return { keywords: this.keywords }\r\n    }\r\n  },\r\n  components: {\r\n    SongTable,\r\n    WithPagination\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.search-songs {\r\n  .table {\r\n    .name-desc {\r\n      display: block;\r\n      margin-top: 8px;\r\n      color: var(--font-color-grey-shallow);\r\n      @include text-ellipsis;\r\n    }\r\n  }\r\n\r\n  .pagination {\r\n    margin-top: 16px;\r\n    text-align: right;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!./songs.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!./songs.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./songs.vue?vue&type=template&id=75c11b4d&scoped=true\"\nimport script from \"./songs.vue?vue&type=script&lang=js\"\nexport * from \"./songs.vue?vue&type=script&lang=js\"\nimport style0 from \"./songs.vue?vue&type=style&index=0&id=75c11b4d&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.11.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"75c11b4d\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.11.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!./songs.vue?vue&type=style&index=0&id=75c11b4d&prod&lang=scss&scoped=true\"","export * from \"-!../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/_vue-loader@15.11.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!./with-pagination.vue?vue&type=style&index=0&id=772dc5dc&prod&lang=scss&scoped=true\""],"sourceRoot":""}